{"version":3,"sources":["webpack:///./src/components/editor.js"],"names":["beautify","require","js","EditorWrap","styled","div","withConfig","displayName","componentId","theme","colors","navy","media","tablet","_templateObject","EditorHeader","Action","button","green","fontSizes","small","Output","medium","Spinner","Loader","props","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","className","Editor","_this","_React$Component","call","this","handleCodeChange","code","setState","handleCodeReset","state","saved","handleCodeRun","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee","jsWorker","execPromise","wrap","_context","prev","next","running","Worker","jsWorkerRef","postMessage","Promise","resolve","onmessage","e","output","data","showOutput","execPromiseRef","abrupt","stop","handleHideOutput","handleStopExec","terminate","handleCodeFormat","indent_size","raw","children","replace","substr","length","render","_this$state","title","onClick","disabled","react_icons_fa___WEBPACK_IMPORTED_MODULE_14__","react_ace__WEBPACK_IMPORTED_MODULE_12___default","mode","value","onChange","wrapEnabled","readOnly","showGutter","showPrintMargin","tabSize","fontSize","width","height","Math","max","match","map","val","undefined","React","Component"],"mappings":"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","file":"13-d3a13d3c20f310bca1fd.js","sourcesContent":["const beautify = require('js-beautify').js;\nimport React from 'react';\nimport brace from 'brace';\nimport AceEditor from 'react-ace';\nimport styled from 'styled-components';\nimport { FaPlay, FaRedo, FaArrowUp, FaMagic } from 'react-icons/fa/';\n\nimport 'brace/mode/javascript';\nimport 'brace/theme/clouds_midnight';\n\nimport { theme, media } from '../styles';\n\nconst EditorWrap = styled.div`\n  max-width: 80%;\n  margin: 50px auto;\n\n  .wrap {\n    position: relative;\n    padding: 15px;\n    border-radius: 4px;\n    background: #172a45;\n    box-shadow: 0 0 140px rgba(255, 255, 255, 0.05);\n  }\n  .ace_editor {\n    color: #a8b2d1;\n    background: #172a45;\n    .ace_scroller {\n      z-index: 9;\n    }\n\n    .ace_selection {\n      padding: 15px;\n      background: ${theme.colors.navy}!important;\n    }\n    .ace_identifier {\n      color: #fff;\n    }\n\n    .ace_keyword {\n      color: #64ffda;\n    }\n\n    .ace_constant,\n    .ace_string {\n      color: #fe8341 !important;\n    }\n\n    .ace_operator {\n      color: #a8b2d1 !important;\n    }\n\n    .ace_variable.ace_language {\n      color: #ea9f82;\n    }\n\n    .ace_comment {\n      color: #657092;\n    }\n  }\n  ${media.tablet`\n    max-width: 100%;\n  `}\n`;\n\nconst EditorHeader = styled.div`\n  text-align: right;\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  z-index: 99;\n  display: inline;\n  width: auto !important;\n  background-image: linear-gradient(\n    to right,\n    transparent 0%,\n    rgba(23, 42, 69, 0.5) 50%,\n    #172a45 100%\n  );\n  height: 20px;\n`;\n\nconst Action = styled.button`\n  border: none;\n  padding: 0;\n  margin-left: 15px;\n  flex: 1;\n  background: none;\n  color: ${theme.colors.green};\n  font-size: ${theme.fontSizes.small};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &.run {\n    color: #e92e2e;\n    &:hover {\n      color: #841b1b;\n    }\n  }\n  &.reset:hover {\n    color: #09ae87;\n  }\n  &.format {\n    color: #3e9add;\n    &:hover {\n      color: #1e72ae;\n    }\n  }\n  svg {\n    display: inline;\n    width: ${theme.fontSizes.small};\n    height: ${theme.fontSizes.small};\n    cursor: pointer;\n    vertical-align: middle;\n  }\n`;\n\nconst Output = styled.div`\n  width: 100%;\n  border-top: 2px solid #1d304a;\n  font-size: ${theme.fontSizes.medium};\n  padding-top: 10px;\n  .title {\n    color: ${theme.colors.green};\n    margin: 0;\n    margin-bottom: 10px;\n    svg {\n      display: inline;\n      width: ${theme.fontSizes.small};\n      height: ${theme.fontSizes.small};\n      cursor: pointer;\n      vertical-align: bottom;\n      color: #8892b0;\n      position: absolute;\n      right: 15px;\n      transition: all 0.2s ease;\n      &:hover {\n        color: #e92e2e;\n      }\n    }\n  }\n  .print {\n    margin: 0;\n    background: #0a192f;\n    padding: 10px;\n    color: #a8b2d1;\n    border-radius: 4px;\n    max-height: 200px;\n    overflow: auto;\n  }\n`;\n\nconst Spinner = styled.div`\n  position: relative;\n  width: 14px !important;\n  height: 14px;\n  display: inline-block;\n\n  &:before,\n  &:after {\n    content: '';\n    display: block;\n  }\n\n  @keyframes pulse {\n    0% {\n      transform: scale(0);\n    }\n\n    50% {\n      transform: scale(1.3);\n      opacity: 0;\n    }\n\n    100% {\n      transform: scale(1.3);\n      opacity: 0;\n    }\n  }\n\n  @keyframes pulse-2 {\n    0% {\n      transform: scale(0);\n    }\n\n    100% {\n      transform: scale(1.3);\n      opacity: 0;\n    }\n  }\n\n  .circle {\n    border-radius: 100px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    margin: auto;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n    -webkit-transform-origin: center center;\n            transform-origin: center center;\n   }\n   .circle-1 {\n    width: 180%;\n    height: 180%;\n    background-color: #e92e2e;\n    left: -40%;\n    -webkit-animation: pulse 1.6s linear 0s infinite;\n            animation: pulse 1.6s linear 0s infinite;\n  }\n  .circle-2 {\n    width: 120%;\n    height: 120%;\n    background-color: #e92e2e;\n    top: 20%;\n    -webkit-animation: pulse-2 1.6s linear 0s infinite;\n            animation: pulse-2 1.6s linear 0s infinite;\n  }\n  .circle-3 {\n    width: 80%;\n    height: 80%;\n    background-color: #e92e2e;\n    top: 40%;\n  }\n}\n`;\n\nconst Loader = props => (\n  <Spinner {...props}>\n    <div className=\"circle circle-1\" />\n    <div className=\"circle circle-2\" />\n    <div className=\"circle circle-3\" />\n  </Spinner>\n);\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const raw = props.children[0].replace(/\\n[\\s]*\\/\\/[\\s]*\\n/gi, '\\n\\n');\n    const code = beautify(raw.substr(1, raw.length - 1), { indent_size: 2 });\n\n    this.state = {\n      code: code,\n      saved: code,\n      output: '',\n      showOutput: false,\n      running: false,\n    };\n    this.jsWorkerRef = null;\n    this.execPromiseRef = null;\n  }\n\n  handleCodeChange = code => this.setState({ code });\n\n  handleCodeReset = () => this.setState({ code: this.state.saved });\n\n  handleCodeRun = async () => {\n    const { code } = this.state;\n\n    await this.setState({\n      running: true,\n    });\n\n    const jsWorker = new Worker('/workers/jsWorker.js');\n\n    this.jsWorkerRef = jsWorker;\n\n    jsWorker.postMessage({ code });\n\n    const execPromise = new Promise(resolve => {\n      jsWorker.onmessage = e => {\n        const output = e.data;\n\n        this.setState(state => {\n          if (state.running) {\n            return { output, running: false, showOutput: true };\n          }\n        });\n\n        resolve(output);\n      };\n    });\n    this.execPromiseRef = execPromise;\n\n    return execPromise;\n  };\n\n  handleHideOutput = () => this.setState({ showOutput: false });\n\n  handleStopExec = () => {\n    const { running } = this.state;\n\n    if (running) {\n      try {\n        this.jsWorkerRef.terminate();\n        this.setState({\n          running: false,\n        });\n      } catch (e) {}\n    }\n  };\n\n  handleCodeFormat = () =>\n    this.setState(state => ({\n      code: beautify(state.code, {\n        indent_size: 2,\n      }),\n    }));\n\n  render() {\n    const { code, output, running, showOutput } = this.state;\n\n    return (\n      <EditorWrap>\n        <div className=\"wrap\">\n          <EditorHeader>\n            <Action\n              className=\"format\"\n              title=\"Format\"\n              onClick={this.handleCodeFormat}\n              disabled={running}>\n              <FaMagic />\n            </Action>\n            <Action\n              className=\"reset\"\n              title=\"Reset\"\n              onClick={this.handleCodeReset}\n              disabled={running}>\n              <FaRedo />\n            </Action>\n            <Action\n              className=\"run\"\n              title={running ? 'Stop' : 'Run'}\n              onClick={running ? this.handleStopExec : this.handleCodeRun}>\n              {running ? <Loader /> : <FaPlay />}\n            </Action>\n          </EditorHeader>\n          <AceEditor\n            mode=\"javascript\"\n            theme=\"clouds_midnight\"\n            value={code}\n            onChange={this.handleCodeChange}\n            wrapEnabled={true}\n            readOnly={running}\n            showGutter={false}\n            showPrintMargin={false}\n            tabSize={2}\n            fontSize={14}\n            width=\"100%\"\n            height={`${Math.max(150, (code.match(/\\n/g) || []).length * 19.16 + 30)}px`}\n          />\n          {showOutput && (\n            <Output>\n              <div className=\"title\">\n                Output:\n                <FaArrowUp onClick={this.handleHideOutput} />\n              </div>\n              <p className=\"print\">\n                {(output || []).map(val => (\n                  <div>{val === undefined ? typeof val : val === null ? 'null' : val}</div>\n                ))}\n              </p>\n            </Output>\n          )}\n        </div>\n      </EditorWrap>\n    );\n  }\n}\n\nexport default Editor;\n"],"sourceRoot":""}