{"version":3,"sources":["webpack:///./src/components/editor.js"],"names":["beautify","require","js","EditorWrap","styled","div","withConfig","displayName","componentId","theme","colors","navy","media","tablet","_templateObject","EditorHeader","Action","button","green","fontSizes","small","Output","medium","Spinner","Loader","props","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","className","Editor","_this","_React$Component","call","this","handleCodeChange","code","setState","handleCodeReset","state","saved","handleCodeRun","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee","jsWorker","execPromise","wrap","_context","prev","next","running","Worker","jsWorkerRef","postMessage","Promise","resolve","onmessage","e","output","data","showOutput","execPromiseRef","abrupt","stop","handleHideOutput","handleStopExec","terminate","handleCodeFormat","indent_size","raw","children","replace","substr","length","render","_this$state","title","onClick","disabled","react_icons_fa___WEBPACK_IMPORTED_MODULE_14__","react_ace__WEBPACK_IMPORTED_MODULE_12___default","mode","value","onChange","wrapEnabled","readOnly","showGutter","showPrintMargin","tabSize","fontSize","width","height","Math","max","match","map","val","undefined","React","Component"],"mappings":"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","file":"13-d3a13d3c20f310bca1fd.js","sourcesContent":["const beautify = require('js-beautify').js;\r\nimport React from 'react';\r\nimport brace from 'brace';\r\nimport AceEditor from 'react-ace';\r\nimport styled from 'styled-components';\r\nimport { FaPlay, FaRedo, FaArrowUp, FaMagic } from 'react-icons/fa/';\r\n\r\nimport 'brace/mode/javascript';\r\nimport 'brace/theme/clouds_midnight';\r\n\r\nimport { theme, media } from '../styles';\r\n\r\nconst EditorWrap = styled.div`\r\n  max-width: 80%;\r\n  margin: 50px auto;\r\n\r\n  .wrap {\r\n    position: relative;\r\n    padding: 15px;\r\n    border-radius: 4px;\r\n    background: #172a45;\r\n    box-shadow: 0 0 140px rgba(255, 255, 255, 0.05);\r\n  }\r\n  .ace_editor {\r\n    color: #a8b2d1;\r\n    background: #172a45;\r\n    .ace_scroller {\r\n      z-index: 9;\r\n    }\r\n\r\n    .ace_selection {\r\n      padding: 15px;\r\n      background: ${theme.colors.navy}!important;\r\n    }\r\n    .ace_identifier {\r\n      color: #fff;\r\n    }\r\n\r\n    .ace_keyword {\r\n      color: #64ffda;\r\n    }\r\n\r\n    .ace_constant,\r\n    .ace_string {\r\n      color: #fe8341 !important;\r\n    }\r\n\r\n    .ace_operator {\r\n      color: #a8b2d1 !important;\r\n    }\r\n\r\n    .ace_variable.ace_language {\r\n      color: #ea9f82;\r\n    }\r\n\r\n    .ace_comment {\r\n      color: #657092;\r\n    }\r\n  }\r\n  ${media.tablet`\r\n    max-width: 100%;\r\n  `}\r\n`;\r\n\r\nconst EditorHeader = styled.div`\r\n  text-align: right;\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n  z-index: 99;\r\n  display: inline;\r\n  width: auto !important;\r\n  background-image: linear-gradient(\r\n    to right,\r\n    transparent 0%,\r\n    rgba(23, 42, 69, 0.5) 50%,\r\n    #172a45 100%\r\n  );\r\n  height: 20px;\r\n`;\r\n\r\nconst Action = styled.button`\r\n  border: none;\r\n  padding: 0;\r\n  margin-left: 15px;\r\n  flex: 1;\r\n  background: none;\r\n  color: ${theme.colors.green};\r\n  font-size: ${theme.fontSizes.small};\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  &.run {\r\n    color: #e92e2e;\r\n    &:hover {\r\n      color: #841b1b;\r\n    }\r\n  }\r\n  &.reset:hover {\r\n    color: #09ae87;\r\n  }\r\n  &.format {\r\n    color: #3e9add;\r\n    &:hover {\r\n      color: #1e72ae;\r\n    }\r\n  }\r\n  svg {\r\n    display: inline;\r\n    width: ${theme.fontSizes.small};\r\n    height: ${theme.fontSizes.small};\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n  }\r\n`;\r\n\r\nconst Output = styled.div`\r\n  width: 100%;\r\n  border-top: 2px solid #1d304a;\r\n  font-size: ${theme.fontSizes.medium};\r\n  padding-top: 10px;\r\n  .title {\r\n    color: ${theme.colors.green};\r\n    margin: 0;\r\n    margin-bottom: 10px;\r\n    svg {\r\n      display: inline;\r\n      width: ${theme.fontSizes.small};\r\n      height: ${theme.fontSizes.small};\r\n      cursor: pointer;\r\n      vertical-align: bottom;\r\n      color: #8892b0;\r\n      position: absolute;\r\n      right: 15px;\r\n      transition: all 0.2s ease;\r\n      &:hover {\r\n        color: #e92e2e;\r\n      }\r\n    }\r\n  }\r\n  .print {\r\n    margin: 0;\r\n    background: #0a192f;\r\n    padding: 10px;\r\n    color: #a8b2d1;\r\n    border-radius: 4px;\r\n    max-height: 200px;\r\n    overflow: auto;\r\n  }\r\n`;\r\n\r\nconst Spinner = styled.div`\r\n  position: relative;\r\n  width: 14px !important;\r\n  height: 14px;\r\n  display: inline-block;\r\n\r\n  &:before,\r\n  &:after {\r\n    content: '';\r\n    display: block;\r\n  }\r\n\r\n  @keyframes pulse {\r\n    0% {\r\n      transform: scale(0);\r\n    }\r\n\r\n    50% {\r\n      transform: scale(1.3);\r\n      opacity: 0;\r\n    }\r\n\r\n    100% {\r\n      transform: scale(1.3);\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  @keyframes pulse-2 {\r\n    0% {\r\n      transform: scale(0);\r\n    }\r\n\r\n    100% {\r\n      transform: scale(1.3);\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .circle {\r\n    border-radius: 100px;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    -webkit-transform: scale(1);\r\n            transform: scale(1);\r\n    -webkit-transform-origin: center center;\r\n            transform-origin: center center;\r\n   }\r\n   .circle-1 {\r\n    width: 180%;\r\n    height: 180%;\r\n    background-color: #e92e2e;\r\n    left: -40%;\r\n    -webkit-animation: pulse 1.6s linear 0s infinite;\r\n            animation: pulse 1.6s linear 0s infinite;\r\n  }\r\n  .circle-2 {\r\n    width: 120%;\r\n    height: 120%;\r\n    background-color: #e92e2e;\r\n    top: 20%;\r\n    -webkit-animation: pulse-2 1.6s linear 0s infinite;\r\n            animation: pulse-2 1.6s linear 0s infinite;\r\n  }\r\n  .circle-3 {\r\n    width: 80%;\r\n    height: 80%;\r\n    background-color: #e92e2e;\r\n    top: 40%;\r\n  }\r\n}\r\n`;\r\n\r\nconst Loader = props => (\r\n  <Spinner {...props}>\r\n    <div className=\"circle circle-1\" />\r\n    <div className=\"circle circle-2\" />\r\n    <div className=\"circle circle-3\" />\r\n  </Spinner>\r\n);\r\n\r\nclass Editor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const raw = props.children[0].replace(/\\n[\\s]*\\/\\/[\\s]*\\n/gi, '\\n\\n');\r\n    const code = beautify(raw.substr(1, raw.length - 1), { indent_size: 2 });\r\n\r\n    this.state = {\r\n      code: code,\r\n      saved: code,\r\n      output: '',\r\n      showOutput: false,\r\n      running: false,\r\n    };\r\n    this.jsWorkerRef = null;\r\n    this.execPromiseRef = null;\r\n  }\r\n\r\n  handleCodeChange = code => this.setState({ code });\r\n\r\n  handleCodeReset = () => this.setState({ code: this.state.saved });\r\n\r\n  handleCodeRun = async () => {\r\n    const { code } = this.state;\r\n\r\n    await this.setState({\r\n      running: true,\r\n    });\r\n\r\n    const jsWorker = new Worker('/workers/jsWorker.js');\r\n\r\n    this.jsWorkerRef = jsWorker;\r\n\r\n    jsWorker.postMessage({ code });\r\n\r\n    const execPromise = new Promise(resolve => {\r\n      jsWorker.onmessage = e => {\r\n        const output = e.data;\r\n\r\n        this.setState(state => {\r\n          if (state.running) {\r\n            return { output, running: false, showOutput: true };\r\n          }\r\n        });\r\n\r\n        resolve(output);\r\n      };\r\n    });\r\n    this.execPromiseRef = execPromise;\r\n\r\n    return execPromise;\r\n  };\r\n\r\n  handleHideOutput = () => this.setState({ showOutput: false });\r\n\r\n  handleStopExec = () => {\r\n    const { running } = this.state;\r\n\r\n    if (running) {\r\n      try {\r\n        this.jsWorkerRef.terminate();\r\n        this.setState({\r\n          running: false,\r\n        });\r\n      } catch (e) {}\r\n    }\r\n  };\r\n\r\n  handleCodeFormat = () =>\r\n    this.setState(state => ({\r\n      code: beautify(state.code, {\r\n        indent_size: 2,\r\n      }),\r\n    }));\r\n\r\n  render() {\r\n    const { code, output, running, showOutput } = this.state;\r\n\r\n    return (\r\n      <EditorWrap>\r\n        <div className=\"wrap\">\r\n          <EditorHeader>\r\n            <Action\r\n              className=\"format\"\r\n              title=\"Format\"\r\n              onClick={this.handleCodeFormat}\r\n              disabled={running}>\r\n              <FaMagic />\r\n            </Action>\r\n            <Action\r\n              className=\"reset\"\r\n              title=\"Reset\"\r\n              onClick={this.handleCodeReset}\r\n              disabled={running}>\r\n              <FaRedo />\r\n            </Action>\r\n            <Action\r\n              className=\"run\"\r\n              title={running ? 'Stop' : 'Run'}\r\n              onClick={running ? this.handleStopExec : this.handleCodeRun}>\r\n              {running ? <Loader /> : <FaPlay />}\r\n            </Action>\r\n          </EditorHeader>\r\n          <AceEditor\r\n            mode=\"javascript\"\r\n            theme=\"clouds_midnight\"\r\n            value={code}\r\n            onChange={this.handleCodeChange}\r\n            wrapEnabled={true}\r\n            readOnly={running}\r\n            showGutter={false}\r\n            showPrintMargin={false}\r\n            tabSize={2}\r\n            fontSize={14}\r\n            width=\"100%\"\r\n            height={`${Math.max(150, (code.match(/\\n/g) || []).length * 19.16 + 30)}px`}\r\n          />\r\n          {showOutput && (\r\n            <Output>\r\n              <div className=\"title\">\r\n                Output:\r\n                <FaArrowUp onClick={this.handleHideOutput} />\r\n              </div>\r\n              <p className=\"print\">\r\n                {(output || []).map(val => (\r\n                  <div>{val === undefined ? typeof val : val === null ? 'null' : val}</div>\r\n                ))}\r\n              </p>\r\n            </Output>\r\n          )}\r\n        </div>\r\n      </EditorWrap>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Editor;\r\n"],"sourceRoot":""}